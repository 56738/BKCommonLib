package net.minecraft.server;

import com.bergerkiller.generated.net.minecraft.server.IntHashMapHandle;

class IntHashMap {
    public static (IntHashMapHandle) net.minecraft.server.IntHashMap createNew() {
#if version >= 1.14
        return new it.unimi.dsi.fastutil.ints.Int2ObjectOpenHashMap();
#else
        return new IntHashMap();
#endif
    }

    public V get(int key);

#if version >= 1.14
    public V remove(int key);
    public (void) V put(int key, V paramV);
    public boolean containsKey(int key);
    public void clear();

    public (Object) net.minecraft.server.IntHashMap.IntHashMapEntry getEntry(int key) {
        java.util.Iterator iter = instance.int2ObjectEntrySet().iterator();
        while (iter.hasNext()) {
            net.minecraft.server.IntHashMap.IntHashMapEntry entry;
            entry = (net.minecraft.server.IntHashMap.IntHashMapEntry) iter.next();
            if (entry.getIntKey() == key) {
                return entry;
            }
        }
        return null;
    }

    public List<com.bergerkiller.bukkit.common.wrappers.IntHashMap.Entry> getEntries() {
        java.util.Collection entries = instance.int2ObjectEntrySet();
        java.util.ArrayList result = new java.util.ArrayList(entries.size());
        java.util.Iterator iter = entries.iterator();
        while (iter.hasNext()) {
            result.add(new com.bergerkiller.bukkit.common.wrappers.IntHashMap.Entry(iter.next()));
        }
        return java.util.Collections.unmodifiableList(result);
    }

    public List<Object> getValues() {
        return java.util.Collections.unmodifiableList(new java.util.ArrayList(instance.values()));
    }

#else
    public V remove:d(int key);
    public (void) void put:a(int key, V paramV);
    public boolean containsKey:b(int key);
    public void clear:c();
    final (Object) IntHashMapEntry<V> getEntry:c(int key);

    public List<com.bergerkiller.bukkit.common.wrappers.IntHashMap.Entry> getEntries() {
        #require net.minecraft.server.IntHashMap private transient (Object[]) IntHashMap.IntHashMapEntry<V>[] entries_field:a;

        Object[] entries = instance#entries_field;
        java.util.ArrayList result = new java.util.ArrayList(entries.length);
        for (int i = 0; i < entries.length; i++) {
            Object entry = entries[i];
            if (entry != null) {
                result.add(new com.bergerkiller.bukkit.common.wrappers.IntHashMap.Entry(entry));
            }
        }
        return java.util.Collections.unmodifiableList(result);
    }

    public List<Object> getValues() {
        #require net.minecraft.server.IntHashMap private transient (Object[]) IntHashMap.IntHashMapEntry<V>[] entries_field:a;
        #require net.minecraft.server.IntHashMap.IntHashMapEntry public final V getEntryValue:b();

        Object[] entries = instance#entries_field;
        java.util.ArrayList result = new java.util.ArrayList(entries.length);
        for (int i = 0; i < entries.length; i++) {
            Object entry = entries[i];
            if (entry != null) {
                result.add(entry#getEntryValue());
            }
        }
        return java.util.Collections.unmodifiableList(result);
    }
#endif

    class IntHashMap.IntHashMapEntry {
#if version >= 1.14
        public int getKey:getIntKey();
        public V getValue();
        public void setValue(V value) {
            instance.setValue(value);
        }
#else
        public final int getKey:a();
        public final V getValue:b();
        public void setValue(V value) {
            #require net.minecraft.server.IntHashMap.IntHashMapEntry private V value_field:b;
            instance#value_field = value;
        }
#endif
    }
}
